// ---- js/base.js ---- //

(function(a,b){"use strict";var c=a.DD={};c.isTouch="createTouch"in document,c.getTaggedElem=function(a,b){while(a.nodeType!==9){if(a.nodeName.toLowerCase()===b)return a;a=a.parentNode}return!1},c.charCount=0,c.charElems=[],c.parseForParticles=function(a){var b,d,e,f,g,h=[],i=[];b=a.textContent.split(" ");while(a.firstChild)a.removeChild(a.firstChild);var j=document.createDocumentFragment();for(var k=0,l=b.length;k<l;k++){d=b[k],e=document.createElement("span"),e.className="word",h.push(e),f=d.split("");for(var m=0,n=f.length;m<n;m++)g=document.createElement("span"),g.className="char",g.textContent=f[m],i.push(g),e.appendChild(g),c.charCount++;j.appendChild(e),j.appendChild(document.createTextNode(" "))}return a.appendChild(j),c.isTouch?h:i}})(window);

// ---- modules/requestanimationframe/requestanimationframe.js ---- //

(function(a){"use strict";var b=0,c="webkit moz ms o".split(" "),d=a.requestAnimationFrame,e=a.cancelAnimationFrame,f;for(var g=0;g<c.length;g++){if(d&&e)break;f=c[g],d=d||a[f+"RequestAnimationFrame"],e=e||a[f+"CancelAnimationFrame"]||a[f+"CancelRequestAnimationFrame"]}if(!d||!e)d=function(c,d){var e=(new Date).getTime(),f=Math.max(0,16-(e-b)),g=a.setTimeout(function(){c(e+f)},f);return b=e+f,g},e=function(b){a.clearTimeout(b)};a.requestAnimationFrame=d,a.cancelAnimationFrame=e})(window);

// ---- js/sparkleshine.js ---- //

(function(a,b,c,d){function g(a){this.element=a,this.chars=a.querySelectorAll(".char"),this.charsLen=this.chars.length;if(!this.charsLen)return;this.endIndex=0,this.startIndex=0,this.hueIndex=Math.floor(Math.random()*360),this.colors=[],this.isHovered=!0,this.isSparkling=!0,this.sparkle(),e=a,b.addEventListener("mouseover",this,!1)}"use strict";var e,f=0;g.prototype.handleEvent=function(a){var b=a.type+"Handler";this[b]&&this[b](a)},g.prototype.mouseoverHandler=function(a){if(this.element.contains(a.target))return;this.isHovered=!1,e=null,b.removeEventListener("mouseover",this,!1)},g.prototype.sparkle=function(){this.endIndex=Math.min(this.endIndex+1,this.charsLen);var a=this.hueIndex*10%360,b=this.isHovered?"hsl("+a+", 100%, 50% )":"white";this.colors.unshift(b);for(var c=this.startIndex;c<this.endIndex;c++)this.chars[c].style.color=this.colors[c];this.isHovered?this.hueIndex++:this.startIndex=Math.min(this.startIndex+1,this.charsLen),this.isSparkling=this.startIndex!==this.charsLen,this.isSparkling&&requestAnimationFrame(this.sparkle.bind(this))},c.onMouseover=function(a){var b=c.getTaggedElem(a.target,"a");if(c.isCursorActive||!b||b===e)return;new g(b)}})(window,document,window.DD);

// ---- js/charparticle.js ---- //

(function(a,b,c,d,e){function n(a){this.index=m,this.element=a,this.x=0,this.y=0,this.angle=0,this.scale=1,this.velocityX=0,this.velocityY=0,this.velocityR=0,this.isSettled=!0,this.wasSettled=!0,this.updatePosition(),m++}function p(a){t(a,a)}function s(b){var c;for(var d=0,e=b.changedTouches.length;d<e;d++)c=b.changedTouches[d],q?r||t(c,b):(q=c.identifier,a.addEventListener("touchend",y,!1))}function t(b,d){if(c.getTaggedElem(b.target,"span"))return;c.isCursorActive=!0,c.areAllCharParticlesSettled=!1,f=b.pageX,g=b.pageY,b.identifier&&(r=b.identifier),d.preventDefault(),c.isTouch?(a.addEventListener("touchmove",v,!1),a.addEventListener("touchend",z,!1)):(a.addEventListener("mousemove",u,!1),a.addEventListener("mouseup",x,!1))}function u(a){w(a)}function v(a){var b;for(var c=0,d=a.changedTouches.length;c<d;c++)b=a.changedTouches[c],r&&b.identifier===r&&w(b)}function w(a){f=parseInt(a.pageX,10),g=parseInt(a.pageY,10)}function x(b){c.isCursorActive=!1,a.removeEventListener("mousemove",u,!1),a.removeEventListener("mouseup",x,!1)}function y(b){var c;for(var d=0,e=b.changedTouches.length;d<e;d++)c=b.changedTouches[d],c.identifier===q&&(q=null,A(),a.removeEventListener("touchend",y,!1))}function z(a){var b;for(var c=0,d=a.changedTouches.length;c<d;c++)b=a.changedTouches[c],b.identifier===r&&A()}function A(){c.isCursorActive=!1,r=null,c.isTouch?(a.removeEventListener("touchmove",v,!1),a.removeEventListener("touchend",z,!1)):(a.removeEventListener("mousemove",u,!1),a.removeEventListener("mouseup",x,!1))}function C(){if(!c.areAllCharParticlesSettled){B=!0;for(var a=0,b=k.length;a<b;a++)k[a].update();c.areAllCharParticlesSettled=B}requestAnimationFrame(C)}"use strict";var f,g,h=Math.PI*2,i=285,j=d.prefixed("transform");c.areAllCharParticlesSettled=!0,c.isCursorActive=!1;var k=c.charParticles=[],l=navigator.userAgent.indexOf("Firefox")!==-1,m=0;n.prototype.updatePosition=function(){var a=this.element;this.width=a.offsetWidth,this.height=a.offsetHeight,this.originX=a.offsetLeft+this.width/2,this.originY=a.offsetTop+this.height/2},n.prototype.update=function(){var a=f-(this.originX+this.x),b=g-(this.originY+this.y),d=Math.sqrt(a*a+b*b),e=0,j=0;if(c.isCursorActive&&d<i){var k=1-d/i;e=Math.atan2(b,a),j=e-Math.PI/2,j*=Math.min(k*3,1);var l=Math.abs(j-this.angle);Math.abs(j-h-this.angle)<l?j-=h:Math.abs(j+h-this.angle)<l&&(j+=h),k*=k*3,this.velocityX+=Math.cos(e)*-k,this.velocityY+=Math.sin(e)*-k}this.angle=this.angle%h,this.velocityX+=(0-this.x)*.005,this.velocityY+=(0-this.y)*.005,this.velocityR+=j-this.angle,this.x+=this.velocityX,this.y+=this.velocityY,this.angle+=this.velocityR*.02,this.velocityX*=.95,this.velocityY*=.95,this.velocityR*=.95;var m=Math.sqrt(this.x*this.x+this.y*this.y);this.scale=m/i*2+1;var n=Math.abs(this.x)<.03&&Math.abs(this.y)<.03&&Math.abs(this.angle)<.004&&Math.abs(this.scale-1)<.03;this.isSettled=this.wasSettled&&n,B&&(B=this.isSettled),this.wasSettled=n,this.render()},n.prototype.render=!d.csstransforms||l?function(){this.element.style.left=this.x+"px",this.element.style.top=this.y+"px"}:d.csstransforms3d?function(){this.element.style[j]=this.isSettled?"none":"translate3d("+this.x+"px, "+this.y+"px, 0 ) "+"scale("+this.scale+") "+"rotate("+this.angle+"rad)"}:function(){this.element.style[j]=this.isSettled?"none":"translate("+this.x+"px, "+this.y+"px ) "+"scale("+this.scale+") "+"rotate("+this.angle+"rad)"};var o=!1,q,r,B=!1,D=!1;c.addCharParticles=function(a){var b,c=[];for(var d=0,e=a.length;d<e;d++)b=new n(a[d]),c.push(b),k.push(b);return c},c.initCharParticles=function(){if(D){for(var a=0,d=k.length;a<d;a++)k[a].updatePosition();return}c.addCharParticles(c.initialParticleElems),c.isTouch?b.addEventListener("touchstart",s,!1):b.addEventListener("mousedown",p,!1),C(),D=!0}})(window,document,window.DD,Modernizr);

// ---- js/typekit.js ---- //

(function(a,b,c,d){"use strict";var e=3e3,f={kitId:"eel3tlp",active:function(){setTimeout(c.initCharParticles,20)},inactive:function(){setTimeout(c.initCharParticles,20)}},g=b.getElementsByTagName("html")[0];g.className+=" wf-loading";var h=setTimeout(function(){g.className=g.className.replace(/( |^)wf-loading( |$)/g,""),g.className+=" wf-inactive",f.inactive()},20),i=b.createElement("script");i.src="//use.typekit.net/"+f.kitId+".js",i.async="true",i.onload=i.onreadystatechange=function(){var a=this.readyState;if(a&&a!=="complete"&&a!=="loaded")return;clearTimeout(h);try{Typekit.load(f)}catch(b){}};var j=b.getElementsByTagName("script")[0];j.parentNode.insertBefore(i,j)})(window,document,window.DD);

// ---- js/init.js ---- //

(function(a,b,c,d){function j(a){f.textContent=i,f.href="mailto:"+i;var b=c.parseForParticles(f),d=c.addCharParticles(b),e,g,h,k,l;for(var m=0,n=d.length;m<n;m++)e=d[m],k=a.pageX-e.originX,l=a.pageY-e.originY,g=Math.atan2(l,k),h=Math.max(0,1-Math.sqrt(k*k+l*l)/300),h*=h*20,e.velocityX=Math.cos(g)*-h,e.velocityY=Math.sin(g)*-h,e.x=k,e.y=l,e.wasSettled=!1,e.isSettled=!1;c.areAllCharParticlesSettled=!1,f.removeEventListener("click",j,!1),a.preventDefault()}function l(){if(k)return;var a=b.querySelectorAll(".split"),d;for(var e=0,g=a.length;e<g;e++)d=c.parseForParticles(a[e]),c.initialParticleElems=c.initialParticleElems.concat(d);c.isTouch||b.addEventListener("mouseover",c.onMouseover,!1),f=b.getElementById("email"),f.addEventListener("click",j,!1),k=!0}"use strict";var e=0,f,g="contact",h="desandro.com",i=g+"@"+h,k=!1;c.initialParticleElems=[],a.addEventListener("DOMContentLoaded",l,!1),c.isTouch||(a.onload=l)})(window,document,window.DD);

